function rt(t){return typeof t=="object"&&t!==null&&"x"in t&&"y"in t&&"unit"in t&&typeof t.unit=="string"&&typeof t.x=="object"&&typeof t.y=="object"&&"topLeft"in t.x&&"topRight"in t.x&&"bottomRight"in t.x&&"bottomLeft"in t.x&&"topLeft"in t.y&&"topRight"in t.y&&"bottomRight"in t.y&&"bottomLeft"in t.y}function ht(t){var e;const n=t.match(/(\d+(?:\.\d+)?)(px|%)/g);if(!n)return{x:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},y:{topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},unit:"px"};const o=n.map(h=>{const[d,f,b]=h.match(/(\d+(?:\.\d+)?)(px|%)/)??[];return{value:parseFloat(f),unit:b}}),i=((e=o[0])==null?void 0:e.unit)||"px";if(o.some(h=>h.unit!==i))throw new Error("Inconsistent units in border-radius string.");const[a,l,s,u]=o.map(h=>h.value),g={topLeft:a??0,topRight:l??a??0,bottomRight:s??a??0,bottomLeft:u??l??a??0};return{x:{...g},y:{...g},unit:i}}function pt({x:t,y:e,unit:n},o,i){if(n==="px"){const a={topLeft:t.topLeft/o,topRight:t.topRight/o,bottomLeft:t.bottomLeft/o,bottomRight:t.bottomRight/o},l={topLeft:e.topLeft/i,topRight:e.topRight/i,bottomLeft:e.bottomLeft/i,bottomRight:e.bottomRight/i};return{x:a,y:l,unit:"px"}}else if(n==="%")return{x:t,y:e,unit:"%"};return{x:t,y:e,unit:n}}function Z(t){return`
    ${t.x.topLeft}${t.unit} ${t.x.topRight}${t.unit} ${t.x.bottomRight}${t.unit} ${t.x.bottomLeft}${t.unit}
    /
    ${t.y.topLeft}${t.unit} ${t.y.topRight}${t.unit} ${t.y.bottomRight}${t.unit} ${t.y.bottomLeft}${t.unit}
  `}function lt(t){return t.x.topLeft===0&&t.x.topRight===0&&t.x.bottomRight===0&&t.x.bottomLeft===0&&t.y.topLeft===0&&t.y.topRight===0&&t.y.bottomRight===0&&t.y.bottomLeft===0}function at(t){return typeof t=="object"&&"x"in t&&"y"in t}function $(t,e){return{x:t,y:e}}function xt(t,e){return $(t.x+e.x,t.y+e.y)}function bt(t,e){return $(t.x-e.x,t.y-e.y)}function Rt(t,e){return $(t.x*e,t.y*e)}function H(t,e,n){return t+(e-t)*n}function Et(t,e,n){return xt(t,Rt(bt(e,t),n))}function yt(t,e,n){return{x:{topLeft:H(t.x.topLeft,e.x.topLeft,n),topRight:H(t.x.topRight,e.x.topRight,n),bottomRight:H(t.x.bottomRight,e.x.bottomRight,n),bottomLeft:H(t.x.bottomLeft,e.x.bottomLeft,n)},y:{topLeft:H(t.y.topLeft,e.y.topLeft,n),topRight:H(t.y.topRight,e.y.topRight,n),bottomRight:H(t.y.bottomRight,e.y.bottomRight,n),bottomLeft:H(t.y.bottomLeft,e.y.bottomLeft,n)},unit:t.unit}}function It(t,e,n){return N((n-t)/(e-t),0,1)}function _(t,e,n,o,i){return H(n,o,It(t,e,i))}function N(t,e,n){return Math.min(Math.max(t,e),n)}const Lt={duration:350,easing:t=>t};function gt(t,e,n,o){let i=!1;const a=()=>{i=!0},l={...Lt,...o};let s;function u(g){s===void 0&&(s=g);const h=g-s,d=N(h/l.duration,0,1),f=Object.keys(t),b=Object.keys(e);if(!f.every(c=>b.includes(c))){console.error("animate Error: `from` keys are different than `to`");return}const w={};f.forEach(c=>{typeof t[c]=="number"&&typeof e[c]=="number"?w[c]=H(t[c],e[c],l.easing(d)):rt(t[c])&&rt(e[c])?w[c]=yt(t[c],e[c],l.easing(d)):at(t[c])&&at(e[c])&&(w[c]=Et(t[c],e[c],l.easing(d)))}),n(w,d>=1,d),d<1&&!i&&requestAnimationFrame(u)}return requestAnimationFrame(u),a}const St={startDelay:0,targetEl:null};function Xt(t,e){const n={...St,...e};let o=t.el(),i=!1,a=null,l=null,s=null,u=null,g=0,h=0,d=0,f=0,b=0,w=0,c=0,L=0,r=0,I=0,R=null,y;o.addEventListener("pointerdown",E),document.body.addEventListener("pointerup",v),document.body.addEventListener("pointermove",S),document.body.addEventListener("touchmove",Y,{passive:!1});function E(p){if(n.targetEl&&p.target!==n.targetEl&&!n.targetEl.contains(p.target)||i||!p.isPrimary)return;n.startDelay>0?(s==null||s({el:p.target}),y=setTimeout(()=>{C()},n.startDelay)):C();function C(){R=p.target;const A=t.boundingRect(),P=t.layoutRect();b=P.x,w=P.y,d=A.x-b,f=A.y-w,g=p.clientX-d,h=p.clientY-f,c=p.clientX,L=p.clientY,r=(p.clientX-A.x)/A.width,I=(p.clientY-A.y)/A.height,i=!0,S(p)}}function m(){const p=t.layoutRect();g-=b-p.x,h-=w-p.y,b=p.x,w=p.y}function v(p){if(!i){y&&(clearTimeout(y),y=null,u==null||u({el:p.target}));return}if(!p.isPrimary)return;i=!1;const C=p.clientX-c,A=p.clientY-L;l==null||l({x:d,y:f,pointerX:p.clientX,pointerY:p.clientY,width:C,height:A,relativeX:r,relativeY:I,el:R}),R=null}function S(p){if(!i){y&&(clearTimeout(y),y=null,u==null||u({el:p.target}));return}if(!p.isPrimary)return;const C=p.clientX-c,A=p.clientY-L,P=d=p.clientX-g,G=f=p.clientY-h;a==null||a({width:C,height:A,x:P,y:G,pointerX:p.clientX,pointerY:p.clientY,relativeX:r,relativeY:I,el:R})}function Y(p){if(!i)return!0;p.preventDefault()}function X(p){a=p}function D(p){l=p}function q(p){s=p}function O(p){u=p}function B(){o.removeEventListener("pointerdown",E),o=t.el(),o.addEventListener("pointerdown",E)}function W(){t.el().removeEventListener("pointerdown",E),document.body.removeEventListener("pointerup",v),document.body.removeEventListener("pointermove",S),document.body.removeEventListener("touchmove",Y),a=null,l=null,s=null,u=null}return{onDrag:X,onDrop:D,onHold:q,onRelease:O,onElementUpdate:B,destroy:W,readjust:m}}function Mt(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}function Yt(t){return 1-Math.pow(1-t,3)}function U(t){return{x:t.x,y:t.y,width:t.width,height:t.height}}function At(t){const e=t.getBoundingClientRect();let n=0,o=0,i=t.parentElement;for(;i;){const a=getComputedStyle(i).transform;if(a&&a!=="none"){const l=a.match(/matrix.*\((.+)\)/);if(l){const s=l[1].split(", ").map(Number);n+=s[4]||0,o+=s[5]||0}}i=i.parentElement}return{y:e.top-o,x:e.left-n,width:e.width,height:e.height}}function K(t){let e=t,n=0,o=0;for(;e;)n+=e.offsetTop,o+=e.offsetLeft,e=e.offsetParent;return{x:o,y:n,width:t.offsetWidth,height:t.offsetHeight}}function st(t,e){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height}function Tt(t){let e=t,n=0,o=0;for(;e;){const i=a=>{const l=getComputedStyle(a);return/(auto|scroll)/.test(l.overflow+l.overflowY+l.overflowX)};if(e===document.body){o+=window.scrollX,n+=window.scrollY;break}i(e)&&(o+=e.scrollLeft,n+=e.scrollTop),e=e.parentElement}return{x:o,y:n}}function Q(t){let e="unread",n,o,i,a,l,s,u,g,h,d,f;function b(){n=t.currentTransform(),o=At(t.el()),i=Tt(t.el()),f=ct(t.el()).map(({parent:r,children:I})=>({parent:{el:r,initialRect:U(r.getBoundingClientRect())},children:I.filter(R=>R instanceof HTMLElement).map(R=>{const y=R;return y.originalBorderRadius||(y.originalBorderRadius=getComputedStyle(R).borderRadius),{el:R,borderRadius:ht(y.originalBorderRadius),initialRect:U(R.getBoundingClientRect())}})})),e="readInitial"}function w(){if(e!=="readInitial")throw new Error("FlipView: Cannot read final values before reading initial values");h=t.layoutRect(),s=o.width/h.width,u=o.height/h.height,a=o.x-h.x-n.dragX+i.x,l=o.y-h.y-n.dragY+i.y,g=pt(t.borderRadius(),s,u);const r=ct(t.el());f=f.map(({parent:R,children:y},E)=>{const m=r[E].parent;return{parent:{...R,el:m,finalRect:K(m)},children:y.map((v,S)=>{const Y=r[E].children[S];let X=K(Y);return Y.hasAttribute("data-swapy-text")&&(X={...X,width:v.initialRect.width,height:v.initialRect.height}),{...v,el:Y,finalRect:X}})}});const I={translateX:a,translateY:l,scaleX:s,scaleY:u};t.el().style.transformOrigin="0 0",t.el().style.borderRadius=Z(g),t.setTransform(I),d=[],f.forEach(({parent:R,children:y})=>{const E=y.map(({el:m,initialRect:v,finalRect:S,borderRadius:Y})=>Ht(m,v,S,Y,R.initialRect,R.finalRect));d.push(...E)}),e="readFinal"}function c(){if(e!=="readFinal")throw new Error("FlipView: Cannot get transition values before reading");return{from:{width:o.width,height:o.height,translate:$(a,l),scale:$(s,u),borderRadius:g},to:{width:h.width,height:h.height,translate:$(0,0),scale:$(1,1),borderRadius:t.borderRadius()}}}function L(){if(e!=="readFinal")throw new Error("FlipView: Cannot get children transition values before reading");return d}return{readInitial:b,readFinalAndReverse:w,transitionValues:c,childrenTransitionData:L}}function Ht(t,e,n,o,i,a){t.style.transformOrigin="0 0";const l=i.width/a.width,s=i.height/a.height,u=e.width/n.width,g=e.height/n.height,h=pt(o,u,g),d=e.x-i.x,f=n.x-a.x,b=e.y-i.y,w=n.y-a.y,c=(d-f*l)/l,L=(b-w*s)/s;return t.style.transform=`translate(${c}px, ${L}px) scale(${u/l}, ${g/s})`,t.style.borderRadius=Z(h),{el:t,fromTranslate:$(c,L),fromScale:$(u,g),fromBorderRadius:h,toBorderRadius:o,parentScale:{x:l,y:s}}}function ct(t){const e=[];function n(o){const i=Array.from(o.children).filter(a=>a instanceof HTMLElement);i.length>0&&(e.push({parent:o,children:i}),i.forEach(a=>n(a)))}return n(t),e}function mt(t){const e=[];let n=t,o={dragX:0,dragY:0,translateX:0,translateY:0,scaleX:1,scaleY:1};const i=ht(window.getComputedStyle(n).borderRadius),a={el:()=>n,setTransform:l,clearTransform:s,currentTransform:()=>o,borderRadius:()=>i,layoutRect:()=>K(n),boundingRect:()=>U(n.getBoundingClientRect()),usePlugin:g,destroy:h,updateElement:d};function l(f){o={...o,...f},u()}function s(){o={dragX:0,dragY:0,translateX:0,translateY:0,scaleX:1,scaleY:1},u()}function u(){const{dragX:f,dragY:b,translateX:w,translateY:c,scaleX:L,scaleY:r}=o;f===0&&b===0&&w===0&&c===0&&L===1&&r===1?n.style.transform="":n.style.transform=`translate(${f+w}px, ${b+c}px) scale(${L}, ${r})`}function g(f,b){const w=f(a,b);return e.push(w),w}function h(){e.forEach(f=>f.destroy())}function d(f){if(!f)return;const b=n.hasAttribute("data-swapy-dragging"),w=n.style.cssText;n=f,b&&n.setAttribute("data-swapy-dragging",""),n.style.cssText=w,e.forEach(c=>c.onElementUpdate())}return a}const $t={animation:"dynamic",enabled:!0,swapMode:"hover",dragOnHold:!1,autoScrollOnDrag:!1,dragAxis:"both",manualSwap:!1};function wt(t){switch(t){case"dynamic":return{easing:Yt,duration:300};case"spring":return{easing:Mt,duration:350};case"none":return{easing:e=>e,duration:1}}}function jt(t,e){const n={...$t,...e},o=Dt({slots:[],items:[],config:n});let i=[],a=[];l();function l(){if(!qt(t))throw new Error("Cannot create a Swapy instance because your HTML structure is invalid. Fix all above errors and then try!");i=Array.from(t.querySelectorAll("[data-swapy-slot]")).map(r=>Bt(r,o)),o.setSlots(i),a=Array.from(t.querySelectorAll("[data-swapy-item]")).map(r=>Ct(r,o)),o.setItems(a),o.syncSlotItemMap(),a.forEach(r=>{r.onDrag(({pointerX:I,pointerY:R})=>{u();let y=!1;i.forEach(E=>{const m=E.rect();st({x:I,y:R},m)&&(y=!0,E.isHighlighted()||E.highlight())}),!y&&o.config().swapMode==="drop"&&r.slot().highlight(),n.swapMode==="hover"&&s(r,{pointerX:I,pointerY:R})}),r.onDrop(({pointerX:I,pointerY:R})=>{g(),n.swapMode==="drop"&&s(r,{pointerX:I,pointerY:R})}),r.onHold(()=>{u()}),r.onRelease(()=>{g()})})}function s(r,{pointerX:I,pointerY:R}){i.forEach(y=>{const E=y.rect();if(st({x:I,y:R},E)){if(r.id()===y.itemId())return;o.config().swapMode==="hover"&&r.setContinuousDrag(!0);const m=r.slot(),v=y.item();if(!o.eventHandlers().onBeforeSwap({fromSlot:m.id(),toSlot:y.id(),draggingItem:r.id(),swapWithItem:(v==null?void 0:v.id())||""}))return;if(o.config().manualSwap){const S=structuredClone(o.slotItemMap());o.swapItems(r,y);const Y=o.slotItemMap(),X=Q(r.view());X.readInitial();const D=v?Q(v.view()):null;D==null||D.readInitial();let q=0,O=0;const B=et(r.view().el());B instanceof Window?(q=B.scrollY,O=B.scrollX):(q=B.scrollTop,O=B.scrollLeft),o.eventHandlers().onSwap({oldSlotItemMap:S,newSlotItemMap:Y,fromSlot:m.id(),toSlot:y.id(),draggingItem:r.id(),swappedWithItem:(v==null?void 0:v.id())||""}),requestAnimationFrame(()=>{const W=t.querySelectorAll("[data-swapy-item]");o.items().forEach(p=>{const C=Array.from(W).find(A=>A.dataset.swapyItem===p.id());p.view().updateElement(C)}),o.syncSlotItemMap(),X.readFinalAndReverse(),D==null||D.readFinalAndReverse(),tt(r,X),v&&D&&tt(v,D),B.scrollTo({left:O,top:q})})}else{let S=0,Y=0;const X=et(r.view().el());X instanceof Window?(S=X.scrollY,Y=X.scrollX):(S=X.scrollTop,Y=X.scrollLeft),ut(r,y,!0),v&&ut(v,m),X.scrollTo({left:Y,top:S});const D=o.slotItemMap();o.syncSlotItemMap();const q=o.slotItemMap();o.eventHandlers().onSwap({oldSlotItemMap:D,newSlotItemMap:q,fromSlot:m.id(),toSlot:y.id(),draggingItem:r.id(),swappedWithItem:(v==null?void 0:v.id())||""})}}})}function u(){t.querySelectorAll("img").forEach(r=>{r.style.pointerEvents="none"}),t.style.userSelect="none",t.style.webkitUserSelect="none"}function g(){t.querySelectorAll("img").forEach(r=>{r.style.pointerEvents=""}),t.style.userSelect="",t.style.webkitUserSelect=""}function h(r){o.config().enabled=r}function d(r){o.eventHandlers().onSwapStart=r}function f(r){o.eventHandlers().onSwap=r}function b(r){o.eventHandlers().onSwapEnd=r}function w(r){o.eventHandlers().onBeforeSwap=r}function c(){L(),requestAnimationFrame(()=>{l()})}function L(){a.forEach(r=>r.destroy()),i.forEach(r=>r.destroy()),o.destroy(),a=[],i=[]}return{enable:h,slotItemMap:()=>o.slotItemMap(),onSwapStart:d,onSwap:f,onSwapEnd:b,onBeforeSwap:w,update:c,destroy:L}}function Dt({slots:t,items:e,config:n}){const o={slots:t,items:e,config:n,slotItemMap:{asObject:{},asMap:new Map,asArray:[]},zIndexCount:1,eventHandlers:{onSwapStart:()=>{},onSwap:()=>{},onSwapEnd:()=>{},onBeforeSwap:()=>!0},scrollOffsetWhileDragging:{x:0,y:0},scrollHandler:null};let i={...o};const a=d=>{var f;(f=i.scrollHandler)==null||f.call(i,d)};window.addEventListener("scroll",a);function l(d){return i.slots.find(f=>f.id()===d)}function s(d){return i.items.find(f=>f.id()===d)}function u(){const d={},f=new Map,b=[];i.slots.forEach(w=>{var c;const L=w.id(),r=((c=w.item())==null?void 0:c.id())||"";d[L]=r,f.set(L,r),b.push({slot:L,item:r})}),i.slotItemMap={asObject:d,asMap:f,asArray:b}}function g(d,f){var b;const w=i.slotItemMap,c=d.id(),L=((b=f.item())==null?void 0:b.id())||"",r=f.id(),I=d.slot().id();w.asObject[r]=c,w.asObject[I]=L,w.asMap.set(r,c),w.asMap.set(I,L);const R=w.asArray.findIndex(E=>E.slot===r),y=w.asArray.findIndex(E=>E.slot===I);w.asArray[R].item=c,w.asArray[y].item=L}function h(){window.removeEventListener("scroll",a),i={...o}}return{slots:()=>i.slots,items:()=>i.items,config:()=>n,setItems:d=>i.items=d,setSlots:d=>i.slots=d,slotById:l,itemById:s,zIndex:(d=!1)=>d?++i.zIndexCount:i.zIndexCount,resetZIndex:()=>{i.zIndexCount=1},eventHandlers:()=>i.eventHandlers,syncSlotItemMap:u,slotItemMap:(d=!1)=>d?structuredClone(i.slotItemMap):i.slotItemMap,onScroll:d=>{i.scrollHandler=d},swapItems:g,destroy:h}}function Bt(t,e){const n=mt(t);function o(){return n.el().dataset.swapySlot}function i(){const h=n.el().children[0];return(h==null?void 0:h.dataset.swapyItem)||null}function a(){return U(n.el().getBoundingClientRect())}function l(){const h=n.el().children[0];if(h)return e.itemById(h.dataset.swapyItem)}function s(){e.slots().forEach(h=>{h.view().el().removeAttribute("data-swapy-highlighted")})}function u(){s(),n.el().setAttribute("data-swapy-highlighted","")}function g(){}return{id:o,view:()=>n,itemId:i,rect:a,item:l,highlight:u,unhighlightAllSlots:s,isHighlighted:()=>n.el().hasAttribute("data-swapy-highlighted"),destroy:g}}function Ct(t,e){const n=mt(t),o={};let i=null,a=null,l=!1,s=!0,u;const g=Ft();let h=()=>{},d=()=>{},f=()=>{},b=()=>{};const{onDrag:w,onDrop:c,onHold:L,onRelease:r}=n.usePlugin(Xt,{startDelay:e.config().dragOnHold?400:0,targetEl:O()}),I=$(0,0),R=$(0,0),y=$(0,0),E=$(0,0);let m=null,v=null;L(x=>{e.config().enabled&&(W()&&!B(x.el)||A()&&C(x.el)||f==null||f(x))}),r(x=>{e.config().enabled&&(W()&&!B(x.el)||A()&&C(x.el)||b==null||b(x))});function S(x){var M;P(),J().highlight(),(M=o.drop)==null||M.call(o);const T=e.slots().map(F=>F.view().boundingRect());e.slots().forEach((F,z)=>{const k=T[z];F.view().el().style.width=`${k.width}px`,F.view().el().style.maxWidth=`${k.width}px`,F.view().el().style.flexShrink="0",F.view().el().style.height=`${k.height}px`});const j=e.slotItemMap(!0);e.eventHandlers().onSwapStart({draggingItem:nt(),fromSlot:ot(),slotItemMap:j}),a=j,n.el().style.position="relative",n.el().style.zIndex=`${e.zIndex(!0)}`,m=et(x.el),e.config().autoScrollOnDrag&&(i=Wt(m,e.config().dragAxis),i.updatePointer({x:x.pointerX,y:x.pointerY})),I.x=window.scrollX,I.y=window.scrollY,y.x=0,y.y=0,m instanceof HTMLElement&&(R.x=m.scrollLeft,R.y=m.scrollTop,v=()=>{E.x=m.scrollLeft-R.x,E.y=m.scrollTop-R.y,n.setTransform({dragX:((u==null?void 0:u.width)||0)+y.x+E.x,dragY:((u==null?void 0:u.height)||0)+y.y+E.y})},m.addEventListener("scroll",v)),e.onScroll(()=>{y.x=window.scrollX-I.x,y.y=window.scrollY-I.y;const F=E.x||0,z=E.y||0;n.setTransform({dragX:((u==null?void 0:u.width)||0)+y.x+F,dragY:((u==null?void 0:u.height)||0)+y.y+z})})}w(x=>{var M;if(e.config().enabled){if(!l){if(W()&&!B(x.el)||A()&&C(x.el))return;S(x)}l=!0,i&&i.updatePointer({x:x.pointerX,y:x.pointerY}),u=x,(M=o.drop)==null||M.call(o),g(()=>{n.el().style.position="relative";const T=x.width+y.x+E.x,j=x.height+y.y+E.y;e.config().dragAxis==="y"?n.setTransform({dragY:j}):e.config().dragAxis==="x"?n.setTransform({dragX:T}):n.setTransform({dragX:T,dragY:j}),h==null||h(x)})}}),c(x=>{if(!l)return;G(),l=!1,s=!1,u=null,m&&(m.removeEventListener("scroll",v),v=null),m=null,E.x=0,E.y=0,y.x=0,y.y=0,i&&(i.destroy(),i=null),J().unhighlightAllSlots(),d==null||d(x),e.eventHandlers().onSwapEnd({slotItemMap:e.slotItemMap(),hasChanged:a!=null&&a.asMap?!Ot(a==null?void 0:a.asMap,e.slotItemMap().asMap):!1}),a=null,e.onScroll(null),e.slots().forEach(T=>{T.view().el().style.width="",T.view().el().style.maxWidth="",T.view().el().style.flexShrink="",T.view().el().style.height=""}),e.config().manualSwap&&e.config().swapMode==="drop"?requestAnimationFrame(M):M();function M(){const T=n.currentTransform(),j=T.dragX+T.translateX,F=T.dragY+T.translateY;o.drop=gt({translate:$(j,F)},{translate:$(0,0)},({translate:z},k)=>{k?l||(n.clearTransform(),n.el().style.transformOrigin=""):n.setTransform({dragX:0,dragY:0,translateX:z.x,translateY:z.y}),k&&(e.items().forEach(it=>{it.isDragging()||(it.view().el().style.zIndex="")}),e.resetZIndex(),n.el().style.position="",s=!0)},wt(e.config().animation))}});function Y(x){h=x}function X(x){d=x}function D(x){f=x}function q(x){b=x}function O(){return n.el().querySelector("[data-swapy-handle]")}function B(x){const M=O();return M?M===x||M.contains(x):!1}function W(){return O()!==null}function p(){return Array.from(n.el().querySelectorAll("[data-swapy-no-drag]"))}function C(x){const M=p();return!M||M.length===0?!1:M.includes(x)||M.some(T=>T.contains(x))}function A(){return p().length>0}function P(){n.el().setAttribute("data-swapy-dragging","")}function G(){n.el().removeAttribute("data-swapy-dragging")}function vt(){h=null,d=null,f=null,b=null,u=null,a=null,i&&(i.destroy(),i=null),m&&v&&m.removeEventListener("scroll",v),n.destroy()}function nt(){return n.el().dataset.swapyItem}function J(){return e.slotById(n.el().parentElement.dataset.swapySlot)}function ot(){return n.el().parentElement.dataset.swapySlot}return{id:nt,view:()=>n,slot:J,slotId:ot,onDrag:Y,onDrop:X,onHold:D,onRelease:q,destroy:vt,isDragging:()=>l,cancelAnimation:()=>o,dragEvent:()=>u,store:()=>e,continuousDrag:()=>s,setContinuousDrag:x=>s=x}}function ut(t,e,n=!1){if(n){const i=e.item();i&&(e.view().el().style.position="relative",i.view().el().style.position="absolute")}else{const i=t.slot();i.view().el().style.position="",t.view().el().style.position=""}if(!t)return;const o=Q(t.view());o.readInitial(),e.view().el().appendChild(t.view().el()),o.readFinalAndReverse(),tt(t,o)}function Ft(){let t=!1;return e=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}function tt(t,e){var n,o,i,a;(o=(n=t.cancelAnimation()).moveToSlot)==null||o.call(n),(a=(i=t.cancelAnimation()).drop)==null||a.call(i);const l=wt(t.store().config().animation),s=e.transitionValues();let u=t.view().currentTransform(),g=0,h=!1;t.cancelAnimation().moveToSlot=gt({translate:s.from.translate,scale:s.from.scale,borderRadius:s.from.borderRadius},{translate:s.to.translate,scale:s.to.scale,borderRadius:s.to.borderRadius},({translate:d,scale:f,borderRadius:b},w,c)=>{if(t.isDragging()){g!==0&&(h=!0);const r=t.dragEvent().relativeX,I=t.dragEvent().relativeY;t.continuousDrag()?t.view().setTransform({translateX:H(u.translateX,u.translateX+(s.from.width-s.to.width)*r,l.easing(c-g)),translateY:H(u.translateY,u.translateY+(s.from.height-s.to.height)*I,l.easing(c-g)),scaleX:f.x,scaleY:f.y}):t.view().setTransform({scaleX:f.x,scaleY:f.y})}else u=t.view().currentTransform(),g=c,h?t.view().setTransform({scaleX:f.x,scaleY:f.y}):t.view().setTransform({dragX:0,dragY:0,translateX:d.x,translateY:d.y,scaleX:f.x,scaleY:f.y});const L=e.childrenTransitionData();L.forEach(({el:r,fromTranslate:I,fromScale:R,fromBorderRadius:y,toBorderRadius:E,parentScale:m})=>{const v=H(m.x,1,l.easing(c)),S=H(m.y,1,l.easing(c));r.style.transform=`translate(${I.x+(0-I.x/v)*l.easing(c)}px, ${I.y+(0-I.y/S)*l.easing(c)}px) scale(${H(R.x/v,1/v,l.easing(c))}, ${H(R.y/S,1/S,l.easing(c))})`,lt(y)||(r.style.borderRadius=Z(yt(y,E,l.easing(c))))}),lt(b)||(t.view().el().style.borderRadius=Z(b)),w&&(t.isDragging()||(t.view().el().style.transformOrigin="",t.view().clearTransform()),t.view().el().style.borderRadius="",L.forEach(({el:r})=>{r.style.transform="",r.style.transformOrigin="",r.style.borderRadius=""}))},l)}function V(...t){console.error("Swapy Error:",...t)}function qt(t){const e=t;let n=!0;const o=e.querySelectorAll("[data-swapy-slot]");e||(V("container passed to createSwapy() is undefined or null"),n=!1),o.forEach(s=>{const u=s,g=u.dataset.swapySlot,h=u.children,d=h[0];(!g||g.length===0)&&(V(u,"does not contain a slotId using data-swapy-slot"),n=!1),h.length>1&&(V("slot:",`"${g}"`,"cannot contain more than one element"),n=!1),d&&(!d.dataset.swapyItem||d.dataset.swapyItem.length===0)&&(V("slot",`"${g}"`,"does not contain an element with an item id using data-swapy-item"),n=!1)});const i=Array.from(o).map(s=>s.dataset.swapySlot),a=e.querySelectorAll("[data-swapy-item]"),l=Array.from(a).map(s=>s.dataset.swapyItem);if(dt(i)){const s=ft(i);V("your container has duplicate slot ids",`(${s.join(", ")})`),n=!1}if(dt(l)){const s=ft(l);V("your container has duplicate item ids",`(${s.join(", ")})`),n=!1}return n}function dt(t){return new Set(t).size!==t.length}function ft(t){const e=new Set,n=new Set;for(const o of t)e.has(o)?n.add(o):e.add(o);return Array.from(n)}function Ot(t,e){if(t.size!==e.size)return!1;for(const[n,o]of t)if(e.get(n)!==o)return!1;return!0}function et(t){let e=t;for(;e;){const n=window.getComputedStyle(e),o=n.overflowY,i=n.overflowX;if((o==="auto"||o==="scroll")&&e.scrollHeight>e.clientHeight||(i==="auto"||i==="scroll")&&e.scrollWidth>e.clientWidth)return e;e=e.parentElement}return window}function Wt(t,e){let n=!1,o,i=0,a=0,l=0,s=0,u=0,g=0,h=null;t instanceof HTMLElement?(o=U(t.getBoundingClientRect()),i=t.scrollHeight-o.height,a=t.scrollWidth-o.width):(o={x:0,y:0,width:window.innerWidth,height:window.innerHeight},i=document.documentElement.scrollHeight-window.innerHeight,a=document.documentElement.scrollWidth-window.innerWidth);function d(){t instanceof HTMLElement?(l=t.scrollTop,s=t.scrollLeft):(l=window.scrollY,s=window.scrollX)}function f(c){n=!1;const L=o.y,r=o.y+o.height,I=o.x,R=o.x+o.width,y=Math.abs(L-c.y)<Math.abs(r-c.y),E=Math.abs(I-c.x)<Math.abs(R-c.x);if(d(),e!=="x")if(y){const m=L-c.y;if(m>=-100){const v=N(m,-100,0);u=-_(-100,0,0,5,v),n=!0}}else{const m=r-c.y;if(m<=100){const v=N(m,0,100);u=_(100,0,0,5,v),n=!0}}if(e!=="y")if(E){const m=I-c.x;if(m>=-100){const v=N(m,-100,0);g=-_(-100,0,0,5,v),n=!0}}else{const m=R-c.x;if(m<=100){const v=N(m,0,100);g=_(100,0,0,5,v),n=!0}}n&&(h&&cancelAnimationFrame(h),b())}function b(){d(),e!=="x"&&(u=l+u>=i?0:u),e!=="y"&&(g=s+g>=a?0:g),t.scrollBy({top:u,left:g}),n&&(h=requestAnimationFrame(b))}function w(){n=!1}return{updatePointer:f,destroy:w}}export{jt as k};
